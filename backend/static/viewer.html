<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Nexus Mobile AI - Visual Stream</title>
<style>
  body { background:#0b0b12; color:#0f0; font-family:sans-serif; margin:0; display:flex; flex-direction:column; align-items:center; }
  h1 { color:#00ffff; font-size:18px; margin:10px; }
  #img { max-width:95vw; max-height:80vh; border:2px solid #00ffea; border-radius:12px; margin-top:10px; box-shadow:0 0 20px rgba(0,255,255,0.3);}
  #status { margin-top:8px; font-size:12px; color:#fff; }
</style>
</head>
<body>
  <h1>üìà Nexus Mobile AI - Gr√°fico em Tempo Real</h1>
  <img id="img" src="" alt="Aguardando stream..."/>
  <div id="status">‚è≥ Aguardando conex√£o...</div>

  <script>
  const ws = new WebSocket("wss://nexus-mobile-ai.onrender.com/ws/stream");
  const imgEl = document.getElementById("img");
  const statusEl = document.getElementById("status");
  let last = 0;

  ws.onopen = () => { statusEl.textContent = "üü¢ Conectado ao stream"; };
  ws.onclose = () => { statusEl.textContent = "üî¥ Desconectado"; };
  ws.onerror = e => { statusEl.textContent = "‚ö†Ô∏è Erro: " + e.message; };

  ws.onmessage = (ev) => {
    try {
      const data = JSON.parse(ev.data);
      if (data.type === "frame" && data.data) {
        imgEl.src = "data:" + (data.mime || "image/jpeg") + ";base64," + data.data;
        last = Date.now();
        statusEl.textContent = "üü¢ Recebendo stream...";
      }
    } catch(e) {
      console.log("Mensagem WS n√£o reconhecida:", ev.data);
    }
  };
  </script>
</body>
</html>
